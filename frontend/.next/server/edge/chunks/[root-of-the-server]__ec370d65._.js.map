{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/i18n/request.ts"],"sourcesContent":["// 處理 server 端的翻譯載入\nimport { getRequestConfig } from \"next-intl/server\";\nimport { routing } from \"./routing\";\n\nexport default getRequestConfig(async ({ requestLocale }) => {\n  let locale = await requestLocale;\n\n  // 確保語系合法\n  if (!locale || !routing.locales.includes(locale as any)) {\n    locale = routing.defaultLocale;\n  }\n\n  return {\n    locale,\n    messages: (await import(`../messages/${locale}.json`)).default,\n  };\n});\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;AACnB;AACA;;;uCAEe,CAAA,GAAA,kQAAA,CAAA,mBAAgB,AAAD,EAAE,OAAO,EAAE,aAAa,EAAE;IACtD,IAAI,SAAS,MAAM;IAEnB,SAAS;IACT,IAAI,CAAC,UAAU,CAAC,8HAAA,CAAA,UAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAgB;QACvD,SAAS,8HAAA,CAAA,UAAO,CAAC,aAAa;IAChC;IAEA,OAAO;QACL;QACA,UAAU,CAAC;;;;;;;;;kBAAa,CAAC,YAAY,EAAE,OAAO,KAAK,CAAC,CAAC,EAAE,OAAO;IAChE;AACF"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/i18n/routing.ts"],"sourcesContent":["import {defineRouting} from 'next-intl/routing';\nimport {createNavigation} from 'next-intl/navigation';\n\nexport const routing = defineRouting({\n  locales: ['en', 'zh'],     // 支援的語系\n  defaultLocale: 'zh',         // 預設語系\n  //localePrefix: 'always' // 強制所有 Link 都補上語系前綴\n});\n\n// 匯出增強版的 Link, useRouter 等，之後跳轉頁面要用這些\nexport const {Link, redirect, usePathname, useRouter} = createNavigation(routing);"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;AAEO,MAAM,UAAU,CAAA,GAAA,0OAAA,CAAA,gBAAa,AAAD,EAAE;IACnC,SAAS;QAAC;QAAM;KAAK;IACrB,eAAe;AAEjB;AAGO,MAAM,EAAC,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAC,GAAG,CAAA,GAAA,sQAAA,CAAA,mBAAgB,AAAD,EAAE"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import createMiddleware from 'next-intl/middleware';\nimport {routing} from './i18n/routing';\nimport { NextRequest, NextResponse } from \"next/server\";\n\n/*\n第三方登入可以使用這款\nhttps://www.npmjs.com/package/next-auth\nhttps://authjs.dev/getting-started/installation\n*/\n\nconst intlMiddleware = createMiddleware(routing);\n\nexport default function middleware(req: NextRequest) {\n  const { pathname } = req.nextUrl;\n\n  // 2. 定義後台路徑的規則 (檢查是否包含 /admin)\n  // 這會匹配例如 /zh/admin 或 /en/admin\n  const isAdminPage = pathname.match(/^\\/(zh|en)\\/admin(\\/.*)?$/);\n  const isLoginPage = pathname.match(/^\\/(zh|en)\\/login$/);\n\n  // 3. 檢查有沒有登入用的 Cookie\n  const token = req.cookies.get(\"auth_token\")?.value;\n  console.log(token)\n\n  // 找出目前是哪種語言 (從路徑抓第一個段落，沒抓到就預設 zh)\n  const locale = pathname.split(\"/\")[1] || \"zh\";\n\n  // 4. 如果是去後台，但「沒有」證件 (Token)\n  if (isAdminPage && !token) {\n    // 把他踢回登入頁面\n    return NextResponse.redirect(new URL(`/${locale}/login`, req.url));\n  }\n\n  if (isLoginPage && token) {\n    return NextResponse.redirect(new URL(`/${locale}/admin`, req.url));\n  }\n\n  // 5. 如果是去前台，或者有證件，就照常跑「語系處理」\n  return intlMiddleware(req);\n}\n\n// 匹配所有路徑\nexport const config = {\n  matcher: [\n    '/', \n    '/(zh|en)/:path*',\n    \"/((?!api|_next|.*\\\\..*).*)\"\n    //'/((?!_next|_vercel|.*\\\\..*).*)' // 攔截所有非靜態檔案的路徑 api 會異常\n  ]  \n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;AAEA;;;;AAIA,GAEA,MAAM,iBAAiB,CAAA,GAAA,8LAAA,CAAA,UAAgB,AAAD,EAAE,8HAAA,CAAA,UAAO;AAEhC,SAAS,WAAW,GAAgB;IACjD,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,+BAA+B;IAC/B,+BAA+B;IAC/B,MAAM,cAAc,SAAS,KAAK,CAAC;IACnC,MAAM,cAAc,SAAS,KAAK,CAAC;IAEnC,sBAAsB;IACtB,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,eAAe;IAC7C,QAAQ,GAAG,CAAC;IAEZ,kCAAkC;IAClC,MAAM,SAAS,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;IAEzC,4BAA4B;IAC5B,IAAI,eAAe,CAAC,OAAO;QACzB,WAAW;QACX,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,EAAE,IAAI,GAAG;IAClE;IAEA,IAAI,eAAe,OAAO;QACxB,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,EAAE,IAAI,GAAG;IAClE;IAEA,6BAA6B;IAC7B,OAAO,eAAe;AACxB;AAGO,MAAM,SAAS;IACpB,SAAS;QACP;QACA;QACA;KAED;AACH"}}]
}